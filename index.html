<!DOCTYPE html>
<html lang="hi">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Expenses Tracker</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      overflow: hidden;
    }

    header {
      background: #2c3e50;
      color: white;
      padding: 30px;
      text-align: center;
    }

    h1 {
      font-size: 2.5em;
      margin-bottom: 10px;
    }

    .subtitle {
      opacity: 0.8;
      font-size: 1.1em;
    }

    .form-section {
      padding: 30px;
      background: #f8f9fa;
      border-bottom: 1px solid #eee;
    }

    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-bottom: 20px;
    }

    .form-group {
      display: flex;
      flex-direction: column;
    }

    label {
      font-weight: 600;
      margin-bottom: 5px;
      color: #2c3e50;
    }

    input,
    select {
      padding: 12px;
      border: 2px solid #ddd;
      border-radius: 8px;
      font-size: 16px;
      transition: border-color 0.3s;
    }

    input:focus,
    select:focus {
      outline: none;
      border-color: #667eea;
    }

    .btn {
      background: #667eea;
      color: white;
      border: none;
      padding: 15px 30px;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      width: 100%;
    }

    .btn:hover {
      background: #5a6fd8;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
    }

    .data-section {
      padding: 30px;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
    }

    @media (max-width: 768px) {
      .data-section {
        grid-template-columns: 1fr;
      }
    }

    .table-container {
      background: white;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    .chart-container {
      background: white;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      height: 400px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
    }

    th,
    td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #eee;
    }

    th {
      background: #f8f9fa;
      font-weight: 600;
      color: #2c3e50;
    }

    tr:hover {
      background: #f8f9fa;
    }

    .total-section {
      background: #2c3e50;
      color: white;
      padding: 20px;
      text-align: center;
      font-size: 1.2em;
      font-weight: 600;
    }

    .delete-btn {
      background: #e74c3c;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 12px;
    }

    .delete-btn:hover {
      background: #c0392b;
    }
  </style>
</head>

<body>

  <div class="container">

    <header>
      <h1>💰 Expenses Tracker</h1>
      <p class="subtitle">Track your spending easily and visually</p>
    </header>

    <section class="form-section">
      <h2>➕ Add New Expense</h2>
      <div class="form-grid">
        <div class="form-group">
          <label for="item">Item Name</label>
          <input type="text" id="item" placeholder="e.g., Groceries, Movie Ticket">
        </div>

        <div class="form-group">
          <label for="category">Category</label>
          <select id="category">
            <option value="food">🍔 Food and Groceries</option>
            <option value="transport">🚗 Transportation</option>
            <option value="rent">🏠 Rent and Household</option>
            <option value="utilities">🧾 Utilities and Bills</option>
            <option value="phone">📱 Phone Recharge and Internet</option>
            <option value="education">🎓 Education Fees and Books</option>
            <option value="stationery">🖊️ Stationery and Supplies</option>
            <option value="healthcare">💊 Healthcare and Medicines</option>
            <option value="personalcare">🪒 Personal Care and Grooming</option>
            <option value="clothing">👕 Clothing and Accessories</option>
            <option value="entertainment">🎬 Entertainment and Subscriptions</option>
            <option value="gifts">🎁 Gifts and Donations</option>
            <option value="savings">💰 Savings and Investments</option>
            <option value="miscellaneous">🤷‍♂️ Miscellaneous/Others</option>
          </select>
        </div>

        <div class="form-group">
          <label for="price">Price (₹)</label>
          <input type="number" id="price" placeholder="e.g., 500" min="0" step="0.01">
        </div>

        <div class="form-group">
          <label for="month">Month</label>
          <select id="month">
            <option value="january">January</option>
            <option value="february">February</option>
            <option value="march">March</option>
            <option value="april">April</option>
            <option value="may">May</option>
            <option value="june">June</option>
            <option value="july">July</option>
            <option value="august">August</option>
            <option value="september">September</option>
            <option value="october">October</option>
            <option value="november">November</option>
            <option value="december">December</option>
          </select>
        </div>
      </div>
      <button class="btn" onclick="addExpense()">Add Expense</button>
    </section>

    <section class="data-section">
      <div class="table-container">
        <h2>📊 All Expenses</h2>

        <!-- 🔍 Filter Dropdown -->
        <div style="margin-bottom:15px;">
          <label for="filter-month" style="font-weight:600;">🔍 Filter by Month:</label>
          <select id="filter-month" onchange="updateUI()" style="padding:8px; border-radius:6px;">
            <option value="all">All</option>
            <option value="january">January</option>
            <option value="february">February</option>
            <option value="march">March</option>
            <option value="april">April</option>
            <option value="may">May</option>
            <option value="june">June</option>
            <option value="july">July</option>
            <option value="august">August</option>
            <option value="september">September</option>
            <option value="october">October</option>
            <option value="november">November</option>
            <option value="december">December</option>
          </select>
        </div>

        <table id="expenses-table">
          <thead>
            <tr>
              <th>Month</th>
              <th>Category</th>
              <th>Item</th>
              <th>Price</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody id="table-body"></tbody>
        </table>
      </div>

      <div class="chart-container">
        <h2>📈 Expenses by Category</h2>
        <canvas id="expenses-chart"></canvas>
      </div>
    </section>

    <div class="total-section">
      Total Expenses: ₹<span id="total-amount">0</span>
    </div>

  </div>

  <script>
    let expenses = JSON.parse(localStorage.getItem('expenses')) || [];
    let expensesChart = null;

    function addExpense() {
      const item = document.getElementById('item').value.trim();
      const category = document.getElementById('category').value;
      const price = parseFloat(document.getElementById('price').value);
      const month = document.getElementById('month').value;

      if (!item || !price || price <= 0) {
        alert('Please enter valid item name and price!');
        return;
      }

      const newExpense = {
        id: Date.now(),
        item: item,
        category: category,
        price: price,
        month: month,
        date: new Date().toLocaleDateString()
      };

      expenses.push(newExpense);
      saveExpenses();
      updateUI();

      document.getElementById('item').value = '';
      document.getElementById('price').value = '';
    }

    function deleteExpense(id) {
      if (confirm('Are you sure you want to delete this expense?')) {
        expenses = expenses.filter(expense => expense.id !== id);
        saveExpenses();
        updateUI();
      }
    }

    function saveExpenses() {
      localStorage.setItem('expenses', JSON.stringify(expenses));
    }

    function getFilteredExpenses() {
      const filterMonth = document.getElementById('filter-month').value;
      if (filterMonth === "all") return expenses;
      return expenses.filter(expense => expense.month === filterMonth);
    }

    function updateTable() {
      const tableBody = document.getElementById('table-body');
      tableBody.innerHTML = '';
      const filtered = getFilteredExpenses();

      if (filtered.length === 0) {
        tableBody.innerHTML = '<tr><td colspan="5" style="text-align: center; color: #666;">No expenses found for this month</td></tr>';
        return;
      }

      filtered.forEach(expense => {
        const row = document.createElement('tr');
        const categoryLabels = {
          'food': '🍔 Food and Groceries',
          'transport': '🚗 Transportation',
          'rent': '🏠 Rent and Household',
          'utilities': '🧾 Utilities and Bills',
          'phone': '📱 Phone Recharge and Internet',
          'education': '🎓 Education Fees and Books',
          'stationery': '🖊️ Stationery and Supplies',
          'healthcare': '💊 Healthcare and Medicines',
          'personalcare': '🪒 Personal Care and Grooming',
          'clothing': '👕 Clothing and Accessories',
          'entertainment': '🎬 Entertainment and Subscriptions',
          'gifts': '🎁 Gifts and Donations',
          'savings': '💰 Savings and Investments',
          'miscellaneous': '🤷‍♂️ Miscellaneous/Others'
        };
        row.innerHTML = `
          <td>${expense.month.charAt(0).toUpperCase() + expense.month.slice(1)}</td>
          <td>${categoryLabels[expense.category]}</td>
          <td>${expense.item}</td>
          <td>₹${expense.price.toFixed(2)}</td>
          <td><button class="delete-btn" onclick="deleteExpense(${expense.id})">Delete</button></td>
        `;
        tableBody.appendChild(row);
      });
    }

    function updateChart() {
      const ctx = document.getElementById('expenses-chart').getContext('2d');
      const filtered = getFilteredExpenses();

      const categoryTotals = {};
      filtered.forEach(expense => {
        categoryTotals[expense.category] = (categoryTotals[expense.category] || 0) + expense.price;
      });

      const categories = Object.keys(categoryTotals);
      const totals = Object.values(categoryTotals);

      if (expensesChart) {
        expensesChart.destroy();
      }

      expensesChart = new Chart(ctx, {
        type: 'pie',
        data: {
          labels: categories.map(cat => {
            const categoryLabels = {
              'food': 'Food and Groceries',
              'transport': 'Transportation',
              'rent': 'Rent and Household',
              'utilities': 'Utilities and Bills',
              'phone': 'Phone Recharge and Internet',
              'education': 'Education Fees and Books',
              'stationery': 'Stationery and Supplies',
              'healthcare': 'Healthcare and Medicines',
              'personalcare': 'Personal Care and Grooming',
              'clothing': 'Clothing and Accessories',
              'entertainment': 'Entertainment and Subscriptions',
              'gifts': 'Gifts and Donations',
              'savings': 'Savings and Investments',
              'miscellaneous': 'Miscellaneous/Others'
            };
            return categoryLabels[cat];
          }),
          datasets: [{
            data: totals,
            backgroundColor: [
              '#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0',
              '#9966FF', '#FF9F40', '#FF6384', '#C9CBCF',
              '#4BC0C0', '#FF6384', '#36A2EB', '#FFCE56',
              '#9966FF', '#FF9F40'
            ],
            borderWidth: 2,
            borderColor: '#fff'
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: { position: 'bottom' },
            tooltip: {
              callbacks: {
                label: function (context) {
                  return `₹${context.parsed.toFixed(2)}`;
                }
              }
            }
          }
        }
      });
    }

    function updateTotal() {
      const filtered = getFilteredExpenses();
      const total = filtered.reduce((sum, expense) => sum + expense.price, 0);
      document.getElementById('total-amount').textContent = total.toFixed(2);
    }

    function updateUI() {
      updateTable();
      updateChart();
      updateTotal();
    }

    document.addEventListener('DOMContentLoaded', function () {
      updateUI();
      const months = ['january', 'february', 'march', 'april', 'may', 'june',
        'july', 'august', 'september', 'october', 'november', 'december'];
      const currentMonth = months[new Date().getMonth()];
      document.getElementById('month').value = currentMonth;
    });
  </script>

</body>
</html>
